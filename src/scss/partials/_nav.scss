// --------------------------------------------------
// Navigation
// --------------------------------------------------

//
// General Properties
//

.menu-bar,
.submenu-bar,
.submenu-tabs,
.submenu-pills {
    @include fs-list-unstyled;
    @include fs-clearfix;

    ul {
        @include fs-list-unstyled;
    }
}
.menu-btn {
    display: block;
    line-height: 1;
    position: relative;
    transition: $fs-btn-transition;
}
.menu-bar-horz,
.submenu-horz {
    @include nav-horz;
}
@each $breakpoint in map-keys($fs-breakpoints) {
    @if $breakpoint != xl {
        // skip xl
        @include fs-min-width($breakpoint) {
            .menu-bar-horz-#{$breakpoint},
            .submenu-horz-#{$breakpoint} {
                @include nav-horz;
            }
        }
    }
}

//
// Sub-levels
//

.menu-bar,
.submenu-bar,
.submenu-tabs,
.submenu-pills {
    // Level 2+
    ul {
        font-size: $fs-font-size-dropdown;
        margin: 0;
        padding-left: 10px;
    }
    ul .menu-btn {
        padding: 0.75em $fs-flyout-horz-spacing;
    }
    &.text-dark ul .menu-btn {
        color: $fs-clr-text-darken;
    }
    &.text-dark ul a.menu-btn {
        color: $fs-clr-text-base;

        &:hover,
        &:focus {
            color: $fs-clr-text-darken;
        }
    }
    &.text-light ul .menu-btn {
        color: $fs-clr-text-inv-darken;
    }
    &.text-light ul a.menu-btn {
        color: rgba($fs-clr-text-inv-darken, 0.8);

        &:hover,
        &:focus {
            color: $fs-clr-text-inv-darken;
        }
    }

    // Level 3
    ul ul {
        padding-left: 20px;
    }
}

//
// Dropdown Menus
//

.fs-menu {
    position: relative;

    li,
    .menu-btn {
        position: relative;
    }

    // Drop indicator icons
    li.menu-item-has-children > .menu-btn {
        @if ($direction == "rtl") {
            padding-left: 2.5em;
        } @else {
            padding-right: 2.5em;
        }
    }
    li.menu-item-has-children > .menu-btn:after {
        content: "\f107";
        font-family: "FontAwesome";
        position: absolute;
        top: 50%;
        @if ($direction == "rtl") {
            left: 1em;
        } @else {
            right: 1em;
        }
        text-align: center;
        transform: translate(0, -50%);
        width: 1em;
        height: 1em;
    }

    // Flyout menu
    ul {
        max-width: 100%;
        min-width: $fs-flyout-width;
        padding: $fs-flyout-vert-spacing 0;
        position: static;
        top: 100%;
        @if ($direction == "rtl") {
            right: 0;
        } @else {
            left: 0;
        }
        z-index: 999;
    }
    li > ul {
        display: none;
    }
    li > ul.show {
        display: block;
    }
    ul.reverse {
        @if ($direction == "rtl") {
            left: 0;
            right: initial;
        } @else {
            left: initial;
            right: 0;
        }
    }
    ul ul {
        top: 0;
        @if ($direction == "rtl") {
            right: 100%;
        } @else {
            left: 100%;
        }
    }
    ul.reverse ul {
        @if ($direction == "rtl") {
            left: 100%;
            right: initial;
        } @else {
            left: inherit;
            right: 100%;
        }
    }
    ul.text-dark > li > .menu-btn {
        color: $fs-clr-text-base;

        &:hover,
        &:focus {
            color: $fs-clr-text-darken;
        }
    }
    ul.text-light > li > .menu-btn {
        color: rgba($fs-clr-text-inv-darken, 0.8);

        &:hover,
        &:focus {
            color: $fs-clr-text-inv-darken;
        }
    }

    // Display drop menus (no-js fallback)
    &.no-js li:hover > ul {
        display: block;
    }

    // Mega Menus
    li.has-mega-menu {
        position: static;
    }
    .fs-mega {
        display: none;
        padding: 20px 0;
        top: 100%;
        @if ($direction == "rtl") {
            right: 0;
        } @else {
            left: 0;
        }
        width: 100%;
        z-index: 999;
    }
    .fs-mega.show {
        display: flex;
    }
    .fs-mega-section {
        margin-bottom: 20px;

        ul {
            display: block;
            padding: 0;
        }
    }
    .fs-mega-section:last-child {
        margin-bottom: 0;
    }
    .mega-section-header {
        display: block;
        font-size: 1.1em;
        font-weight: $fs-font-weight-bold;
    }
    .mega-section-header a {
        background-color: transparent !important;
        font-size: inherit !important;
        display: inline !important;
        padding: 0 !important;
    }
}
.fs-menu.menu-bar-horz,
.fs-menu.submenu-horz {
    @include nav-dropdown();
}
@each $breakpoint in map-keys($fs-breakpoints) {
    @if $breakpoint != xl {
        // skip xl
        @include fs-min-width($breakpoint) {
            .fs-menu.menu-bar-horz-#{$breakpoint},
            .fs-menu.submenu-horz-#{$breakpoint} {
                @include nav-dropdown();
            }
        }
    }
}

//
// Menu Bar
//

.menu-bar {
    .menu-btn {
        border: none;
    }

    // Level 1
    > li > .menu-btn {
        font-size: $fs-font-size-menu-bar-btn;
        font-weight: $fs-font-weight-menu-bar-btn;
        letter-spacing: $fs-font-ls-menu-bar-btn;
        padding: fs-em(18px, $fs-font-size-menu-bar-btn)
            fs-em(20px, $fs-font-size-menu-bar-btn);
        text-transform: $fs-font-transform-menu-bar-btn;
    }
    &.text-dark {
        > li > .menu-btn {
            color: $fs-clr-text-darken;

            &:hover,
            &:focus {
                background-color: rgba($fs-clr-light, 0.3);
            }
        }
        > li.active,
        > li.current-menu-item,
        > li.current-menu-ancestor {
            > .menu-btn {
                background-color: rgba($fs-clr-light, 0.3);
            }
        }
    }
    &.text-light {
        > li > .menu-btn {
            color: $fs-clr-text-inv-darken;

            &:hover,
            &:focus {
                background-color: rgba($fs-clr-black, 0.5);
            }
        }
        > li.active,
        > li.current-menu-item,
        > li.current-menu-ancestor {
            > .menu-btn {
                background-color: rgba($fs-clr-black, 0.5);
            }
        }
    }
}

//
// Submenu Bar
//

.submenu-bar {
    padding: $fs-padding-submenu;

    .menu-btn {
        border: none;
    }
    &.text-dark {
        .menu-btn {
            color: rgba($fs-clr-text-darken, 0.8);

            &:hover,
            &:focus {
                color: $fs-clr-text-darken;
            }
        }
        > li.active,
        > li.current-menu-item,
        > li.current-menu-ancestor {
            > .menu-btn {
                background-color: rgba($fs-clr-light, 0.3);
                color: $fs-clr-text-darken;
            }
        }
    }
    &.text-light {
        .menu-btn {
            color: rgba($fs-clr-text-inv-darken, 0.8);

            &:hover,
            &:focus {
                color: $fs-clr-text-inv-darken;
            }
        }
        > li.active,
        > li.current-menu-item,
        > li.current-menu-ancestor {
            > .menu-btn {
                background-color: rgba($fs-clr-black, 0.5);
                color: $fs-clr-text-inv-darken;
            }
        }
    }

    // Level 1
    > li > .menu-btn {
        font-weight: $fs-font-weight-submenu-btn;
        font-size: $fs-font-size-submenu-btn;
        letter-spacing: $fs-font-ls-submenu-btn;
        padding: fs-em(10px, $fs-font-size-submenu-btn)
            fs-em(16px, $fs-font-size-submenu-btn);
        text-transform: $fs-font-transform-submenu-btn;
    }

    // Level 2 flyouts
    &.fs-menu > li > ul {
        margin-top: $fs-padding-submenu;
    }
}

//
// Tabs
//

.submenu-tabs {
    border-color: $fs-tabs-border-color;
    border-style: solid;

    @if ($direction == "rtl") {
        border-width: $fs-tabs-border-width $fs-tabs-border-width 0 0;
    } @else {
        border-width: 0 0 $fs-tabs-border-width $fs-tabs-border-width;
    }

    > li > .menu-btn {
        background: $fs-tabs-bg;
        border-color: $fs-tabs-border-color;
        border-style: solid;
        @if ($direction == "rtl") {
            border-width: 0 0 $fs-tabs-border-width $fs-tabs-border-width;
        } @else {
            border-width: $fs-tabs-border-width $fs-tabs-border-width 0 0;
        }
        padding: $fs-padding-tabs;
        font-size: $fs-font-size-tabs;
        color: inherit;

        &:hover,
        &:focus {
            background-color: $fs-tabs-hover-bg;
        }
    }
    > li.active,
    > li.current-menu-item,
    > li.current-menu-ancestor {
        > .menu-btn {
            background: $fs-tabs-active-bg;
            border-bottom-color: transparent;
            cursor: default;
        }
    }
    > li.active,
    > li.current-menu-item {
        > .menu-btn {
            cursor: default;
        }
    }

    // Horizontal
    &.submenu-horz {
        @include nav-tabs-horz;
    }

    // Level 2+
    ul {
        background: $fs-tabs-active-bg;
        padding-top: $fs-flyout-vert-spacing;
        padding-bottom: $fs-flyout-vert-spacing;

        .menu-btn {
            color: $fs-clr-text-base;

            &:hover,
            &:focus {
                color: $fs-clr-text-darken;
            }
        }
    }
    > li > ul {
        @if ($direction == "rtl") {
            border-left-color: $fs-tabs-border-color;
            border-left-style: solid;
            border-left-width: $fs-tabs-border-width;
        } @else {
            border-right-color: $fs-tabs-border-color;
            border-right-style: solid;
            border-right-width: $fs-tabs-border-width;
        }
    }
}
@each $breakpoint in map-keys($fs-breakpoints) {
    @if $breakpoint != xl {
        // skip xl
        @include fs-min-width($breakpoint) {
            .submenu-tabs.submenu-horz-#{$breakpoint} {
                @include nav-tabs-horz;
            }
        }
    }
}
.text-light {
    @include tabs-variant("inverse");
}
.text-dark {
    @include tabs-variant;
}

//
// Pills
//

.submenu-pills {
    margin: (-$fs-pills-spacing) (-$fs-pills-spacing) ($fs-spacing-element - 2)
        (-$fs-pills-spacing);

    > li {
        padding: $fs-pills-spacing;
    }
    > li > .menu-btn {
        background: $fs-pills-bg;
        border-color: $fs-pills-border-color;
        border-style: solid;
        border-width: $fs-pills-border-width;
        color: inherit;
        padding: $fs-padding-pills;
        font-size: $fs-font-size-pills;

        &:hover,
        &:focus {
            background: $fs-pills-hover-bg;
        }
    }

    // Horizontal
    &.submenu-horz {
        @include nav-pills-horz;
    }

    // Level 2+
    ul {
        padding: $fs-flyout-vert-spacing 10px;

        .menu-btn {
            color: $fs-clr-text-base;
            padding-right: 10px;
            padding-left: 10px;

            &:hover,
            &:focus {
                color: $fs-clr-text-darken;
            }
        }
    }
}
@each $breakpoint in map-keys($fs-breakpoints) {
    @if $breakpoint != xl {
        // skip xl
        @include fs-min-width($breakpoint) {
            .submenu-pills.submenu-horz-#{$breakpoint} {
                @include nav-pills-horz;
            }
        }
    }
}
.text-light {
    @include pills-variant("inverse");
}
.text-dark {
    @include pills-variant;
}
.submenu-pills {
    > li.active,
    > li.current-menu-item,
    > li.current-menu-ancestor {
        > .menu-btn,
        > .menu-btn:hover,
        > .menu-btn:focus {
            background: $fs-pills-active-bg;
            border-color: transparent;
            color: $fs-pills-active-text;
        }
    }
    > li.active,
    > li.current-menu-item {
        cursor: default;
    }
}
